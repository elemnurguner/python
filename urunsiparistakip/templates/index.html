<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ürün Sipariş Takip Uygulaması</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <h1 class="mt-5">Ürün Sipariş Takip Uygulaması</h1>

        <!-- Flash mesajları -->
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="alert alert-{{ category }}">{{ message }}</div>
                {% endfor %}
            {% endif %}
        {% endwith %}

        <h2 class="mt-4">Ürünler</h2>
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Ad</th>
                    <th>Fiyat</th>
                    <th>Stok</th>
                </tr>
            </thead>
            <tbody>
                {% for urun in urunler %}
                <tr>
                    <td>{{ urun.id }}</td>
                    <td>{{ urun.ad }}</td>
                    <td>{{ urun.fiyat }}</td>
                    <td>{{ urun.stok }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <h2 class="mt-4">Yeni Ürün Ekle</h2>
        <form method="POST" action="/urun_ekle">
            <div class="form-group">
                <label for="ad">Ürün Adı</label>
                <input type="text" class="form-control" id="ad" name="ad" required>
            </div>
            <div class="form-group">
                <label for="fiyat">Fiyat</label>
                <input type="number" step="0.01" class="form-control" id="fiyat" name="fiyat" required>
            </div>
            <div class="form-group">
                <label for="stok">Stok</label>
                <input type="number" class="form-control" id="stok" name="stok" required>
            </div>
            <button type="submit" class="btn btn-primary">Ekle</button>
        </form>

        <h2 class="mt-4">Siparişler</h2>
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Ürün ID</th>
                    <th>Miktar</th>
                    <th>Durum</th>
                    <th>İşlem</th>
                </tr>
            </thead>
            <tbody>
                {% for siparis in siparisler %}
                <tr>
                    <td>{{ siparis.id }}</td>
                    <td>{{ siparis.urun_id }}</td>
                    <td>{{ siparis.miktar }}</td>
                    <td>{{ siparis.durum }}</td>
                    <td>
                        {% if siparis.durum == "Hazırlanıyor" %}
                            <a href="/siparis_gonder/{{ siparis.id }}" class="btn btn-success btn-sm">Gönder</a>
                        {% endif %}
                        <a href="/siparis_sil/{{ siparis.id }}" class="btn btn-danger btn-sm">Sil</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <h2 class="mt-4">Yeni Sipariş Ekle</h2>
        <form method="POST" action="/siparis_ekle">
            <div class="form-group">
                <label for="urun_id">Ürün ID</label>
                <input type="number" class="form-control" id="urun_id" name="urun_id" required>
            </div>
            <div class="form-group">
                <label for="miktar">Miktar</label>
                <input type="number" class="form-control" id="miktar" name="miktar" required>
            </div>
            <button type="submit" class="btn btn-primary">Ekle</button>
        </form>
    </div>
</body>
</html>